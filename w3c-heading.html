<link rel="import" href="bower_components/polymer/polymer.html">
<polymer-element name="w3c-heading">
  <template>
    <style>
      :host {
        display: block;
        font-size: 2em;
        font-weight: bold;
        margin: 0.67em 0;
      }

      :host[aria-level="2"] {
        display: block;
        font-size: 1.5em;
        font-weight: bold;
        margin: 0.83em 0;
      }

      :host[aria-level="3"] {
        display: block;
        font-size: 1.17em;
        font-weight: bold;
        margin: 1em 0;
      }

      :host[aria-level="4"] {
        display: block;
        font-size: 1em;
        font-weight: bold;
        margin: 1.33em 0;
      }

      :host[aria-level="5"] {
        display: block;
        font-size: 0.83em;
        font-weight: bold;
        margin: 1.67em 0;
      }

      :host[aria-level="6"] {
        display: block;
        font-size: 0.67em;
        font-weight: bold;
        margin: 2.33em 0;
      }
    </style>
    <content></content>
  </template>
  <script>
    function nestingLevel(element) {
      var nesting = 1;
      var sectioning_elements = [
        'article',
        'aside',
        'nav',
        'section'
      ];

      // Thanks to http://stackoverflow.com/a/5178132 for the tree-climbing
      // technique.
      while(element && element.nodeType == 1) {
        if(sectioning_elements.indexOf(element.localName.toLowerCase()) > -1) {
          nesting++;
        }
        element = element.parentNode;
      };

      return nesting;
    }

    Polymer('w3c-heading', {
      ready: function() {
        this.setAttribute('role', 'heading');
        this.setAttribute('aria-level', nestingLevel(this));
      }
    });
  </script>
</polymer-element>
